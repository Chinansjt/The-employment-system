{"remainingRequest":"/Users/papaning/代码/git/The-employment-system/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/papaning/代码/git/The-employment-system/src/components/verifyCode/index.vue?vue&type=style&index=0&id=afe701ce&lang=scss&scoped=true&","dependencies":[{"path":"/Users/papaning/代码/git/The-employment-system/src/components/verifyCode/index.vue","mtime":1575027535168},{"path":"/Users/papaning/代码/git/The-employment-system/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/papaning/代码/git/The-employment-system/node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/papaning/代码/git/The-employment-system/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/papaning/代码/git/The-employment-system/node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/papaning/代码/git/The-employment-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/papaning/代码/git/The-employment-system/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"../../style/mixin\";\n\n.code-btn {\n\twidth: 110px;\n    text-align: center;\n    background: $mainColor;\n\tcolor: #fff;\n    font-size: 14px;\n    cursor: pointer;\n    border-radius: 0;\n    border: none;\n    &:hover{\n        background-color: $hoverColor;\n    }\n}\n.btn-disabled {\n\tbackground: #dcdcdc;\n    color: #999;\n    &:hover{\n        background-color: #dcdcdc;\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/verifyCode","sourcesContent":["<template>\n\t<Button \n        @click=\"getCode\"\n        :style=\"myStyle\"\n        class=\"code-btn\" \n        :class=\"{'btn-disabled': isSend}\"\n        :loading=\"loading\"\n    >\n        {{content}}\n\t</Button>\n</template>\n\n<script>\nimport { notify, isPhone } from \"@/plugins/utils\";\nimport Api from \"@/plugins/api\";\n\nexport default {\n    props: [\"phone\", \"type\", \"myStyle\", \"isReset\"],\n    data() {\n        return {\n            content: \"获取验证码\",\n            isSend: false,\n            timer: null,\n            loading: false,\n        }\n    },\n    watch: {\n        // 监听isReset，为true时，初始化组件\n        \"isReset\": function(newVal, oldVal){\n            this.isSend = false\n            this.content = \"获取验证码\"\n            clearTimeout(this.timer)\n            this.timer = null\n        }\n    },\n    methods: {\n        getCode() {\n            if(this.isSend){\n                return\n            }\n            if (!isPhone(this.phone)) {\n                notify.error(\"请输入正确的手机号！\");\n                return;\n            }\n            this.loading = true\n            Api.getVerifyCode({ phone: this.phone, \n            type: this.type }).then(res => {\n                this.loading = false\n                if(res.status == \"1001\"){\n                    this.$emit(\"getCode\", res.extData.bizNo);\n                    this.timeChange();\n                }else{\n                    notify.error(res.message);\n                }\n            });\n        },\n        timeChange() {\n            let self = this;\n            let format = \"ss重发\";\n            let count = 60;\n            down();\n            function down(){\n                self.content = format.replace(/s/, count);\n                count--;\n                if (count < 0) {\n                    self.content = \"重新获取\";\n                    self.isSend = false;\n                    clearTimeout(self.timer);\n                    self.timer = null;\n                } else {\n                    self.isSend = true;\n                    self.timer = setTimeout(down, 1000);\n                }\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/mixin\";\n\n.code-btn {\n\twidth: 110px;\n    text-align: center;\n    background: $mainColor;\n\tcolor: #fff;\n    font-size: 14px;\n    cursor: pointer;\n    border-radius: 0;\n    border: none;\n    &:hover{\n        background-color: $hoverColor;\n    }\n}\n.btn-disabled {\n\tbackground: #dcdcdc;\n    color: #999;\n    &:hover{\n        background-color: #dcdcdc;\n    }\n}\n</style>"]}]}